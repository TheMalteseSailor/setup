windows: 192.168.119.128

kali:
	ovpn: 10.8.0.2
pivot: 192.168.119.129
	192.168.1.122
	ovpn: 10.8.0.1

server:
wget https://git.io/vpn -O openvpn-install.sh
chmod +x openvpn-install.sh
sudo ./openvpn-install.sh

sudo cp /etc/ssh/sshd_conf /etc/ssh/sshd_conf.bak
sudo vim /etc/ssh/sshd_conf
	uncomment GatewayPorts and change to 'yes'
sudo systemctl restart ssh



Client:
<grab client.ovpn from server generated by install script>
# if testing locally you need to modify the script's remote address to be an internal address you can reach it.>
# place script in /etc/openvpn/client/client.ovpn
sudo apt install openvpn

sudo vim /etc/ssh/sshd_conf
	uncomment GatewayPorts and change to 'yes'
sudo systemctl restart ssh

sudo openvpn --config client/client.ovpn
// checking for tun interface and 10.. address
ip a
// this ssh scheme is done this way because root can't log in remotely 
ssh -p 22 owner@10.8.0.1
sudo su
~C
-R 10.8.0.1:8000:10.8.0.2:8000
// -R <VPS_IP>:<VPS_PORT>:<LOCAL_CLIENT_IP>:<LOCAL_CLIENT_PORT>


Local Testing setup of ssh keys:
//https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-20-04
ssh-keygen
//type a password
ssh-copy-id owner@10.8.0.1
// give ssh password
ssh owner@10.8.0.1
// it asks for key password


Setting up SSH on aws lightsail:
//Navigate to lightsail account at the top right
// Select SSH Keys tab once the page loads
// download the default keys using the download button next to the region key
// go to the lightsail homepage and select the button to create a new instance
// choose OS only and select ubuntu 20.04 LTS
// **** make sure that auto create snapshots are disable b/c that costs money ****
// click the button to create the instance at the bottom.
// Make sure your public IP is attached to the instance
ssh -i LightsailDefaultKey-us-east-1.pem ubuntu@54.198.152.41
// in lightsail webui, disable IPv6.
// in lightsale webui, add a custom firewall rule, UDP, 1194 or the port selected in your ovpn setup script.

//print the /root/client.opvn to terminal and copy the text to local /etc/openvpn/client/client.ovpn
// follow the above sections to connet ovpn and port forward.


